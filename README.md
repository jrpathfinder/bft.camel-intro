# bft.camel-intro



**_Целью задания является погружение в apache camel. В работе использовать spring'овые стартеры для camel.
Приложение должно создавать 2 rest-сервиса._**

### Первый на вход должен получать dto с датой.

При поступлении запроса в сервис, он должен отправить в топик kafka сообщение в protobuf формате, в котором будет информация о том, 
когда запрос пришел и от кого (ip) и какая дата пришла в запросе, guid запроса. 

В ответ должен быть возвращен guid запроса, который мыположили в kafka.
Далее, после вычитки из топика, сервис должен записать в БД в таблицу sessions данные, которые пришли. Структуру таблицы придумать самостоятельно.

### Второй сервис на вход должен принимать guid (результат выполнения первого сервиса).

Далее соединиться с СУБД, выбрать по guid данные из таблицы sessions. Если данных нет, вернуть ответ о том, что данных нет.

Если есть, сделать select из таблицы trains с данными с учетом даты из sessions (тело запроса первого сервиса).

Структура таблицы такая: id_train integer, dt_start datetime, id_station_start integer, train_name varchar.

Сортировка запроса должна быть по dt_start.

Запрос должен выбирать значения, где dt_start > присланной даты из sessions (тело запроса первого сервиса).

Получив данные из СУБД, они должны быть обработаны в camel. В 5 потоков. Каждый поток должен получать одну запись, полученную из БД, и делать так, чтобы train_name становился UPPER_CASE.

После этого они должны быть отданы в качестве ответа на изначальный запрос вызывающему.

Rest-сервисы, работа с kafka и СУБД, многопоточка должны быть реализованы именно на camel. В качестве СУБД использовать PG. Всё можно развернуть локально. По выполнению задачи созвонимся и посмотрим на результат.
